import express, { Request, Response } from 'express';
import { publicPath, viewsRootPath } from './util/baseConfigs';
import mysql from 'mysql';
const exphbs = require('express-handlebars'); //necessÃ¡rio importar nesse formato

const app = express();
const hbs = exphbs.create({
  partialsDir: ['src/views/partials']
});

//????????????????????????????????????????????????????????????????? configuracoes
app.engine('handlebars', hbs.engine);
app.set('view engine', 'handlebars');
app.set('views', viewsRootPath);

app.use(express.static(publicPath));
//????????????????????????????????????????????????????????????????? configuracoes

app.get('/', (req: Request, res: Response) => {
  res.render('home');
});

const conn = mysql.createConnection({
  host: '127.0.0.1',
  user: 'root',
  password: 'ale123',
  port: 3306,
  database: 'node_mysql'
});

conn.connect(err => {
  if (err) {
    console.log(err.message);
    return;
  }

  console.log("Conectou");
  app.listen(3000, () => {
    console.log('executando pois conectou');
  });
})

